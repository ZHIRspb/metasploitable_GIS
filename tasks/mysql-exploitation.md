# MySQL Exploitation

MySQL - это система управления реляционными базами данных (СУБД), которая используется для хранения и управления данными. Она является одной из самых популярных открытых СУБД. MySQL работает по клиент-серверной архитектуре, где клиентские приложения подключаются к серверу MySQL для выполнения операций с данными. Сервер MySQL управляет данными и выполняет запросы от клиентских приложений.

<figure><img src="../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

Первым шагом в эксплуатации MySQL является получение учетных данных

Одним из методов получение учетных данных является перебор комбинаций логин/пароль с целью определения валидной комбинации

#### Hydra Bruteforce

С помощью утилиты hydra вы можете подобрать учетные данные для доступа к MySQL.

Используйте данные (ссылка) словари для ускорения подбора.

Вы получите логин root, от лица которого можно войти без пароля:

<figure><img src="../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (5).png" alt=""><figcaption></figcaption></figure>

#### Nmap Enumeration

Еще одним способом является использование скриптов Nmap

<figure><img src="../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

К примеру, скрипт mysql-enum тоже может выдать валидные “креды” без агрессивного подбора

<figure><img src="../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

#### Metasploit Bruteforce

Подбор учетных данный с помощью модуля `auxiliary/scanner/mysql/mysql_login`:

<figure><img src="../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

Далее, используя найденные учетные данные, вы можете просмотреть содержание баз данных, в них можно найти полезную информацию для дальнейшей эксплуатации

Например, вы можете найти логины и хэши паролей пользователей CMS Wordpress чтобы реализовать получение обратной оболочки

<figure><img src="../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

Вы можете использовать модуль Metasploit `auxiliary/scanner/mysql/mysql_schemadump`, чтобы не искать названия таблиц, колонок и информации внутри них “вручную”

<figure><img src="../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

Вернемся к найденным данным:

<figure><img src="../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>

Перед нами логины и хэши паролей от учетных записей системы управления контентом (CMS) Wordpress

> Хэширование паролей - это процесс преобразования пароля в некоторую уникальную строку фиксированной длины, называемую хешем, с использованием хеш-функции. Хеш-функция принимает на вход произвольные данные (в данном случае - пароль) и возвращает строку фиксированной длины, которая выглядит как случайная последовательность символов. Основное свойство хеш-функций, используемых для хэширования паролей, заключается в том, что они должны быть односторонними: легко вычислить хеш для входных данных, но практически невозможно восстановить исходные данные из хеша без знания метода хеширования исходных данных.

Мы не можем восстановить пароль, но можем его подобрать, чтобы в конечном итоге хэш подобранного пароля был аналогичен уже известному.

Для начала нужно узнать, какой тип хэша перед нами представлен, сделать это можно с помощью утилиты hash-identifier, которая выведет возможные варианты

<figure><img src="../.gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>

Также можно найти этот тип на сайте [hashcat](https://hashcat.net/wiki/doku.php?id=example\_hashes) с примерами разных типов хэшей

<figure><img src="../.gitbook/assets/image (13).png" alt=""><figcaption></figcaption></figure>

#### Hashcat password cracking

С помощью этой же утилиты hashcat вы можете подобрать пароль к найденным хэшам, используя список паролей выше:

<figure><img src="../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

#### John password cracking

Для “взлома” паролей также можно использовать John the Ripper - инструмент, разработанный, чтобы помочь системным администраторам находить слабые пароли и даже автоматически предупреждать пользователей об этом по электронной почте.

Для начала сохраните данные в файл в формате **username:password**

<figure><img src="../.gitbook/assets/image (16).png" alt=""><figcaption></figcaption></figure>

Затем выполните команду john файл\_с\_хэшами.txt --wordlist=/путь/до/списка.txt

После успешного подбора будут выведены пароли от пользователей

<figure><img src="../.gitbook/assets/image (17).png" alt=""><figcaption></figcaption></figure>
